<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>More on Updates &mdash; Pyrogram Documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
    <link rel="canonical" href="https://docs.pyrogram.org/topics/more-on-updates.html"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Client Settings" href="client-settings.html" />
    <link rel="prev" title="Creating Filters" href="create-filters.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Pyrogram
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/install.html">Install Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../start/setup.html">Project Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../start/auth.html">Authorization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../start/invoking.html">Invoking Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../start/updates.html">Handling Updates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../start/errors.html">Error Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../start/examples/index.html">Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/client.html">Pyrogram Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/methods/index.html">Available Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/types/index.html">Available Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/bound-methods/index.html">Bound Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/enums/index.html">Enumerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/handlers.html">Update Handlers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/decorators.html">Decorators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/errors/index.html">RPC Errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/filters.html">Update Filters</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Topic Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="use-filters.html">Using Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="create-filters.html">Creating Filters</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">More on Updates</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#handler-groups">Handler Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="#update-propagation">Update propagation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#stop-propagation">Stop Propagation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#continue-propagation">Continue Propagation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="client-settings.html">Client Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="speedups.html">Speedups</a></li>
<li class="toctree-l1"><a class="reference internal" href="text-formatting.html">Text Formatting</a></li>
<li class="toctree-l1"><a class="reference internal" href="synchronous.html">Synchronous Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="smart-plugins.html">Smart Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="storage-engines.html">Storage Engines</a></li>
<li class="toctree-l1"><a class="reference internal" href="serializing.html">Object Serialization</a></li>
<li class="toctree-l1"><a class="reference internal" href="proxy.html">Proxy Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="scheduling.html">Scheduling Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="mtproto-vs-botapi.html">MTProto vs. Bot API</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="test-servers.html">Test Servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced-usage.html">Advanced Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="voice-calls.html">Voice Calls</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Meta</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support.html">Support Pyrogram</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Telegram Raw API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../telegram/functions/index.html">Raw Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../telegram/types/index.html">Raw Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../telegram/base/index.html">Raw Base</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Pyrogram</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>More on Updates</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="more-on-updates">
<h1>More on Updates<a class="headerlink" href="#more-on-updates" title="Permalink to this heading"></a></h1>
<p>Here we’ll show some advanced usages when working with <a class="reference internal" href="../start/updates.html"><span class="doc">update handlers</span></a> and
<a class="reference internal" href="use-filters.html"><span class="doc">filters</span></a>.</p>
<div class="contents local topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#handler-groups" id="id2">Handler Groups</a></p></li>
<li><p><a class="reference internal" href="#update-propagation" id="id3">Update propagation</a></p></li>
</ul>
</div>
<hr class="docutils" />
<section id="handler-groups">
<h2>Handler Groups<a class="headerlink" href="#handler-groups" title="Permalink to this heading"></a></h2>
<p>If you register handlers with overlapping (conflicting) filters, only the first one is executed and any other handler
will be ignored. This is intended by design.</p>
<p>In order to handle the very same update more than once, you have to register your handler in a different dispatching
group. Dispatching groups hold one or more handlers and are processed sequentially, they are identified by a number
(number 0 being the default) and sorted, that is, a lower group number has a higher priority:</p>
<p>For example, take these two handlers:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">on_message</span><span class="p">(</span><span class="n">filters</span><span class="o">.</span><span class="n">text</span> <span class="o">|</span> <span class="n">filters</span><span class="o">.</span><span class="n">sticker</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">text_or_sticker</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Text or Sticker&quot;</span><span class="p">)</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">on_message</span><span class="p">(</span><span class="n">filters</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">just_text</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Just Text&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Here, <code class="docutils literal notranslate"><span class="pre">just_text</span></code> is never executed because <code class="docutils literal notranslate"><span class="pre">text_or_sticker</span></code>, which has been registered first, already handles
texts (<code class="docutils literal notranslate"><span class="pre">filters.text</span></code> is shared and conflicting). To enable it, register the handler using a different group:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">on_message</span><span class="p">(</span><span class="n">filters</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">just_text</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Just Text&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or, if you want <code class="docutils literal notranslate"><span class="pre">just_text</span></code> to be executed <em>before</em> <code class="docutils literal notranslate"><span class="pre">text_or_sticker</span></code> (note <code class="docutils literal notranslate"><span class="pre">-1</span></code>, which is less than <code class="docutils literal notranslate"><span class="pre">0</span></code>):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">on_message</span><span class="p">(</span><span class="n">filters</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">group</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">just_text</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Just Text&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>With <a class="reference internal" href="../api/methods/add_handler.html#pyrogram.Client.add_handler" title="pyrogram.Client.add_handler"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_handler()</span></code></a> (without decorators) the same can be achieved with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">add_handler</span><span class="p">(</span><span class="n">MessageHandler</span><span class="p">(</span><span class="n">just_text</span><span class="p">,</span> <span class="n">filters</span><span class="o">.</span><span class="n">text</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="update-propagation">
<h2>Update propagation<a class="headerlink" href="#update-propagation" title="Permalink to this heading"></a></h2>
<p>Registering multiple handlers, each in a different group, becomes useful when you want to handle the same update more
than once. Any incoming update will be sequentially processed by all of your registered functions by respecting the
groups priority policy described above. Even in case any handler raises an unhandled exception, Pyrogram will still
continue to propagate the same update to the next groups until all the handlers are done. Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">on_message</span><span class="p">(</span><span class="n">filters</span><span class="o">.</span><span class="n">private</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">on_message</span><span class="p">(</span><span class="n">filters</span><span class="o">.</span><span class="n">private</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Unhandled exception!&quot;</span><span class="p">)</span>  <span class="c1"># Simulate an unhandled exception</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">on_message</span><span class="p">(</span><span class="n">filters</span><span class="o">.</span><span class="n">private</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>All these handlers will handle the same kind of messages, that are, messages sent or received in private chats.
The output for each incoming update will therefore be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>0
Exception: Unhandled exception!
2
</pre></div>
</div>
<section id="stop-propagation">
<h3>Stop Propagation<a class="headerlink" href="#stop-propagation" title="Permalink to this heading"></a></h3>
<p>In order to prevent further propagation of an update in the dispatching phase, you can do <em>one</em> of the following:</p>
<ul class="simple">
<li><p>Call the update’s bound-method <code class="docutils literal notranslate"><span class="pre">.stop_propagation()</span></code> (preferred way).</p></li>
<li><p>Manually <code class="docutils literal notranslate"><span class="pre">raise</span> <span class="pre">StopPropagation</span></code> exception (more suitable for raw updates only).</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Internally, the propagation is stopped by handling a custom exception. <code class="docutils literal notranslate"><span class="pre">.stop_propagation()</span></code> is just an elegant
and intuitive way to <code class="docutils literal notranslate"><span class="pre">raise</span> <span class="pre">StopPropagation</span></code>; this also means that any code coming <em>after</em> calling the method
won’t be executed as your function just raised an exception to signal the dispatcher not to propagate the
update anymore.</p>
</div>
<p>Example with <code class="docutils literal notranslate"><span class="pre">stop_propagation()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">on_message</span><span class="p">(</span><span class="n">filters</span><span class="o">.</span><span class="n">private</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">on_message</span><span class="p">(</span><span class="n">filters</span><span class="o">.</span><span class="n">private</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">message</span><span class="o">.</span><span class="n">stop_propagation</span><span class="p">()</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">on_message</span><span class="p">(</span><span class="n">filters</span><span class="o">.</span><span class="n">private</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Example with <code class="docutils literal notranslate"><span class="pre">raise</span> <span class="pre">StopPropagation</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyrogram</span> <span class="kn">import</span> <span class="n">StopPropagation</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">on_message</span><span class="p">(</span><span class="n">filters</span><span class="o">.</span><span class="n">private</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">on_message</span><span class="p">(</span><span class="n">filters</span><span class="o">.</span><span class="n">private</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">async</span> <span class="n">ef</span> <span class="n">_</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">raise</span> <span class="n">StopPropagation</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">on_message</span><span class="p">(</span><span class="n">filters</span><span class="o">.</span><span class="n">private</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Each handler is registered in a different group, but the handler in group number 2 will never be executed because the
propagation was stopped earlier. The output of both (equivalent) examples will be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>0
1
</pre></div>
</div>
</section>
<section id="continue-propagation">
<h3>Continue Propagation<a class="headerlink" href="#continue-propagation" title="Permalink to this heading"></a></h3>
<p>As opposed to <a class="reference external" href="#stop-propagation">stopping the update propagation</a> and also as an alternative to the
<a class="reference external" href="#handler-groups">handler groups</a>, you can signal the internal dispatcher to continue the update propagation within
<strong>the same group</strong> despite having conflicting filters in the next registered handler. This allows you to register
multiple handlers with overlapping filters in the same group; to let the dispatcher process the next handler you can do
<em>one</em> of the following in each handler you want to grant permission to continue:</p>
<ul class="simple">
<li><p>Call the update’s bound-method <code class="docutils literal notranslate"><span class="pre">.continue_propagation()</span></code> (preferred way).</p></li>
<li><p>Manually <code class="docutils literal notranslate"><span class="pre">raise</span> <span class="pre">ContinuePropagation</span></code> exception (more suitable for raw updates only).</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Internally, the propagation is continued by handling a custom exception. <code class="docutils literal notranslate"><span class="pre">.continue_propagation()</span></code> is just an
elegant and intuitive way to <code class="docutils literal notranslate"><span class="pre">raise</span> <span class="pre">ContinuePropagation</span></code>; this also means that any code coming <em>after</em> calling the
method won’t be executed as your function just raised an exception to signal the dispatcher to continue with the
next available handler.</p>
</div>
<p>Example with <code class="docutils literal notranslate"><span class="pre">continue_propagation()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">on_message</span><span class="p">(</span><span class="n">filters</span><span class="o">.</span><span class="n">private</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">message</span><span class="o">.</span><span class="n">continue_propagation</span><span class="p">()</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">on_message</span><span class="p">(</span><span class="n">filters</span><span class="o">.</span><span class="n">private</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">message</span><span class="o">.</span><span class="n">continue_propagation</span><span class="p">()</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">on_message</span><span class="p">(</span><span class="n">filters</span><span class="o">.</span><span class="n">private</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Example with <code class="docutils literal notranslate"><span class="pre">raise</span> <span class="pre">ContinuePropagation</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyrogram</span> <span class="kn">import</span> <span class="n">ContinuePropagation</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">on_message</span><span class="p">(</span><span class="n">filters</span><span class="o">.</span><span class="n">private</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">raise</span> <span class="n">ContinuePropagation</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">on_message</span><span class="p">(</span><span class="n">filters</span><span class="o">.</span><span class="n">private</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">raise</span> <span class="n">ContinuePropagation</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">on_message</span><span class="p">(</span><span class="n">filters</span><span class="o">.</span><span class="n">private</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Three handlers are registered in the same group, and all of them will be executed because the propagation was continued
in each handler (except in the last one, where is useless to do so since there is no more handlers after).
The output of both (equivalent) examples will be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>0
1
2
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="create-filters.html" class="btn btn-neutral float-left" title="Creating Filters" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="client-settings.html" class="btn btn-neutral float-right" title="Client Settings" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>